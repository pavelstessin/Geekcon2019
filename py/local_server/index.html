<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<script>

    const poll = function() {
        const myRequest = new XMLHttpRequest();
        console.log('polling...');
        myRequest.open('GET', '/client_poll');
        myRequest.send();
        myRequest.onreadystatechange = function () {
            if (myRequest.readyState === 4) {
                document.getElementById('ajax-content').innerHTML = myRequest.responseText;
                setTimeout(poll, 1000)
            }
        };
    };

    // first time
    poll();

</script>
<body>

    <h1 id="ajax-content">
        I just woke up.
    </h1>

</body>
</html>

